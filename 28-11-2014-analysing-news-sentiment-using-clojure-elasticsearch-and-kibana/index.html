<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Mark Woodhall: Analysing news sentiment using Clojure, Elasticsearch and Kibana.</title>
    <link rel="canonical" href="http://markwoodhall.com/28-11-2014-analysing-news-sentiment-using-clojure-elasticsearch-and-kibana/">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Merriweather:300,700,700italic,300italic|Open+Sans:700,400" />
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css">
    <link href="/css/screen.css" rel="stylesheet" type="text/css" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="@markwodhall" />
    <meta name="twitter:description" content="<p>I've been working on a project recently to do with analysing the underlying sentiment found in online news stories. I wanted to have a play with <a href='http://www.elasticsearch.org/overview/kibana/'>Kibana</a> to do some "real time" visualisations and I wanted to do it without using log files.</p><p>So, I came up with a small (less than 100 lines) Clojure program that would:</p><ol><li>Query various popular news sites and analyse words using an open source lexicon dataset.</li><li>Filter any words that have little impact, like "the".</li><li>Sanitize anything that may have contained HTML markup.</li><li>Store in <a href='http://www.elasticsearch.org/'>Elasticsearch</a>.</li></ol><p>I've left it running for ~24 hours and the results are interesting, if not very scientifically accurate.</p><p>It has aggregated data from the following source.</p><ul><li>BBC News</li><li>Sky News</li><li>Fox News</li><li>Huffington Post</li><li>Daily Mail</li><li>CNN</li><li>Telegraph</li><li>Reuters</li><li>Yahoo News</li><li>Google News</li></ul><p>All of the results below assume 0 is a neutral sentiment, <0 is a negative sentiment and >0 is a positive one.</p><h3><a name="daily&#95;mail&#95;(mailonline)"></a>Daily Mail (MailOnline)</h3>Everyone knows the <a href='http://www.dailymail.co.uk/home/index.html'>Daily Mail</a> is typical tabloid news, I expected that it would probably generate quite a negative sentiment. It was consistently the most negative.<p><a href='http://i.imgur.com/6ssw2Cc.png'><img src="http://i.imgur.com/6ssw2Cc.png" alt="DailyMail Sentiment" /></a></p><h3><a name="huffington&#95;post"></a>Huffington Post</h3>I didn't realise it before now but the <a href='http://www.huffingtonpost.co.uk/'>Huffington Post</a> has quite a lot of positive news as well as some reasonably humorous articles. It was consistently the most postive. It also appears to publish a LOT and very frequently, which makes the graph a bit jumpy.<p><a href='http://i.imgur.com/6QarNI0.png'><img src="http://i.imgur.com/6QarNI0.png" alt="Huffington" /></a></p><h3><a name="bbc&#95;news"></a>BBC News</h3>I expected that the <a href='http://www.bbc.co.uk'>BBC</a> might be quite consistent and might represent a good view of overall news sentiment. It was more negative than I expected, I guess that is just the world we live in.<p><a href='http://i.imgur.com/JbKKBWg.png'><img src="http://i.imgur.com/JbKKBWg.png" alt="BBC" /></a></p><p>All of the other news sources (Sky, Fox, CNN, Telegraph, Reuters, Yahoo, Google) trended much closer to a neutral sentiment.</p><h3><a name="overall"></a>Overall</h3>I think the overall sentiment may be a little off because of including the Huffington Post data, I think in the long run, the more sources I add the better the data will be.<p><a href='http://i.imgur.com/s4BhqJu.png'><img src="http://i.imgur.com/s4BhqJu.png" alt="Overall" /></a></p><p>I'm planning to leave this running over a longer period and see how it gets on, it would be interesting for it to pick up a major news event, we will see.</p><p>For anyone interested, here is a screenshot of the Kibana dashboard.</p><p><a href='http://i.imgur.com/enIcLcC.png'><img src="http://i.imgur.com/enIcLcC.png" alt="Kibana" /></a></p><p>I'll do a more technical post soon and make available the code once I'm finished.</p>" />
    <meta name="twitter:title" content="Analysing news sentiment using Clojure, Elasticsearch and Kibana." />
    <meta name="twitter:image" content="" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56746791-1', 'auto');
  ga('send', 'pageview');

</script>
</head>
<body>


<nav class="navbar navbar-default">

    <div class="container">
        <div id="navbar" class="">
            <a class="navbar-brand" href="/">
                <div class="navbar-brand-image"></div>
            </a>
        </div><!--/.nav-collapse -->
    </div><!--/.container-fluid -->
</nav>


<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <div id="content">
                
<div id="post">
    <div class="post-header">
    <div id="post-meta" class="row">
        <div class="col-lg-6">November 28, 2014</div>
        
    </div>
    <h2>Analysing news sentiment using Clojure, Elasticsearch and Kibana.</h2>
</div>
<div>
    
    <p>I've been working on a project recently to do with analysing the underlying sentiment found in online news stories. I wanted to have a play with <a href='http://www.elasticsearch.org/overview/kibana/'>Kibana</a> to do some "real time" visualisations and I wanted to do it without using log files.</p><p>So, I came up with a small (less than 100 lines) Clojure program that would:</p><ol><li>Query various popular news sites and analyse words using an open source lexicon dataset.</li><li>Filter any words that have little impact, like "the".</li><li>Sanitize anything that may have contained HTML markup.</li><li>Store in <a href='http://www.elasticsearch.org/'>Elasticsearch</a>.</li></ol><p>I've left it running for ~24 hours and the results are interesting, if not very scientifically accurate.</p><p>It has aggregated data from the following source.</p><ul><li>BBC News</li><li>Sky News</li><li>Fox News</li><li>Huffington Post</li><li>Daily Mail</li><li>CNN</li><li>Telegraph</li><li>Reuters</li><li>Yahoo News</li><li>Google News</li></ul><p>All of the results below assume 0 is a neutral sentiment, <0 is a negative sentiment and >0 is a positive one.</p><h3><a name="daily&#95;mail&#95;(mailonline)"></a>Daily Mail (MailOnline)</h3>Everyone knows the <a href='http://www.dailymail.co.uk/home/index.html'>Daily Mail</a> is typical tabloid news, I expected that it would probably generate quite a negative sentiment. It was consistently the most negative.<p><a href='http://i.imgur.com/6ssw2Cc.png'><img src="http://i.imgur.com/6ssw2Cc.png" alt="DailyMail Sentiment" /></a></p><h3><a name="huffington&#95;post"></a>Huffington Post</h3>I didn't realise it before now but the <a href='http://www.huffingtonpost.co.uk/'>Huffington Post</a> has quite a lot of positive news as well as some reasonably humorous articles. It was consistently the most postive. It also appears to publish a LOT and very frequently, which makes the graph a bit jumpy.<p><a href='http://i.imgur.com/6QarNI0.png'><img src="http://i.imgur.com/6QarNI0.png" alt="Huffington" /></a></p><h3><a name="bbc&#95;news"></a>BBC News</h3>I expected that the <a href='http://www.bbc.co.uk'>BBC</a> might be quite consistent and might represent a good view of overall news sentiment. It was more negative than I expected, I guess that is just the world we live in.<p><a href='http://i.imgur.com/JbKKBWg.png'><img src="http://i.imgur.com/JbKKBWg.png" alt="BBC" /></a></p><p>All of the other news sources (Sky, Fox, CNN, Telegraph, Reuters, Yahoo, Google) trended much closer to a neutral sentiment.</p><h3><a name="overall"></a>Overall</h3>I think the overall sentiment may be a little off because of including the Huffington Post data, I think in the long run, the more sources I add the better the data will be.<p><a href='http://i.imgur.com/s4BhqJu.png'><img src="http://i.imgur.com/s4BhqJu.png" alt="Overall" /></a></p><p>I'm planning to leave this running over a longer period and see how it gets on, it would be interesting for it to pick up a major news event, we will see.</p><p>For anyone interested, here is a screenshot of the Kibana dashboard.</p><p><a href='http://i.imgur.com/enIcLcC.png'><img src="http://i.imgur.com/enIcLcC.png" alt="Kibana" /></a></p><p>I'll do a more technical post soon and make available the code once I'm finished.</p>
</div>

<div id="post-tags">
    <b>Tags: </b>
    
    <a href="/tags/clojure/">clojure</a>
    
    <a href="/tags/elasticsearch/">elasticsearch</a>
    
</div>


    <div id="prev-next">
        
        <a href="/12-02-2015-using-a-clojure-repl-for-everyday-sql-tasks/">&laquo; Using a Clojure REPL for everyday SQL tasks.</a>
        
        
        <a class="right" href="/19-11-2016-creating-clj-tdo-a-command-line-todo-list-part-three/">Creating clj-tdo, a command line todo list, part 3. &raquo;</a>
        
    </div>

    
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//markwoodhall.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    


</div>

            </div>
        </div>
    </div>
    <footer>Copyright &copy;  Mark Woodhall
        <br />
        <a href="/">Home</a> |
        <a href="/about">About</a> |
        <a href="/archives/">Archives</a> |
        <a href="/feed.xml">Subscribe</a>
        <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p></footer>
</div>
<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
<script src="/js/highlight.pack.js" type="text/javascript"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

